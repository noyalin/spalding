<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     enterprise_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
?>
<div id="my-account-all">
	<h1 id="my-account-info">Edit Account Information</h1>

	<div class="my-account-top clearfix">
		<div class="my-account-welcome">
			<span>
				<?php $customerName = Mage::helper('customer')->getCustomerName() ?>
				<?php echo 'Welcome, ' . $customerName ?>
			</span>
		</div>
		<div class="my-account-logout">
			<a class="logout-link" href="<?php echo $this->getUrl('customer/account/logout', array('_secure'=>true)) ?>">Log Out</a>
		</div>
	</div>

	<?php echo $this->getMessagesBlock()->getGroupedHtml() ?>

	<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('mobile_my_account_menu')->toHtml(); ?>

    <div id="my-account-info-content">
		<form id="account-edit-form" action="<?php echo $this->getUrl('customer/account/editPost') ?>" method="post" id="form-validate" enctype="multipart/form-data">
			<div class="logInInfoBox">
				<?php echo $this->getBlockHtml('formkey') ?>
				<h2>Login Information</h2>
				<table>
					<tbody>
						<?php echo $this->getLayout()->createBlock('customer/widget_name')->setObject($this->getCustomer())->toHtml() ?>
					<tr>
						<td class="infoLabel" colspan="2"><label for="email" class="required"><span class="rStar">*</span>Email Address</label></td>
					</tr>
					<tr>
						<td class="infoInput" colspan="2"><input type="email" name="email" id="email" value="<?php echo $this->htmlEscape($this->getCustomer()->getEmail()) ?>" title="Email Address" class="input-text required-entry validate-email"></td>
					</tr>
					<tr>
						<td class="infoLabel"><label for="change_password">Change Password</label></td>
						<td class="infoCheck">
							<input type="checkbox" name="change_password" id="change_password" value="1" onclick="setPasswordForm(this.checked)" title="Change Password"<?php if ($this->getCustomer()->getChangePassword() == 1): ?> checked="checked"<?php endif; ?> class="checkbox" />
						</td>
					</tr>
					</tbody>
				</table>
			</div>
			<div class="logInInfoBox change-password" style="display:none;">
				<h2>Change Password</h2>
				<table>
					<tbody>
						<tr>
							<td class="infoLabel"><label for="current_password"><span class="rStar">*</span>Current Password</label></td>
						</tr>
						<tr>
							<td class="infoInput"><input type="password" class="input-text" name="current_password" id="current_password"></td>
						</tr>
						<tr>
							<td class="infoLabel"><label for="password"><span class="rStar">*</span>New Password</label></td>
						</tr>
						<tr>
							<td class="infoInput"><input type="password" class="input-text validate-password" name="password" id="password"></td>
						</tr>
						<tr>
							<td class="infoLabel"><label for="confirmation"><span class="rStar">*</span>Confirm Password</label></td>
						</tr>
						<tr>
							<td class="infoInput"><input type="password" class="input-text validate-cpassword" name="confirmation" id="confirmation"></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="logInInfoBox">
				<table class="logInInfoBtn">
					<tbody><tr>
							<td class="backBtn">
								<a href="<?php echo $this->escapeUrl($this->getUrl('customer/account/')) ?>" class="backBtn">Back To My Profile</a>
							</td>
							<td class="submitBtn">
								<button type="submit" class="button" title="Save" onClick="return validateForm('#account-edit-form')">Save Change</button>
							</td>
						</tr>
					</tbody></table>
				<div class="clearfloats"></div>
			</div>
			<div class="logInInfoBox clearfix">
				<p class="required">* Required Fields</p>
			</div>
		</form>
	</div>
    <script type="text/javascript">
	//<![CDATA[
	<?php if ($this->getCustomer()->getChangePassword()): ?>
	    setPasswordForm(true);
	<?php endif; ?>
	//]]>
    </script>
</div>